= Environment Class

The Environment class encapsulates the configuration data used to setup
the Ledger. It also provides methods for manipulating the configuration
files.

To demonstrate the Environment class we will need a set of conforming project
as define in support/projects.rdoc[qed://../helpers/projects.rdoc].

An Environment is instantiated with a single argument, the name of the
environment. If a name is not given the current environment will be used.
The current environment is determined by looking for a temporary PID-based
config file, failing that the RUBYENV environment variable, failing that
the `default` file in the users roll config directory, and lastly if all
else fails falling back to the static value "production".

  env = Roll::Environment.new
  env.name.assert == 'production'

An environment stores two essential tables for the functioning of Rolls.
The first if the lookup table. Which contains an associative array 
of [path, depth] pairs. We can add a entry to the lookup table via #append.

  env.append('tmp/projects', 2)

Looking at the lookup table we will see the entry is present.

  env.lookup.assert == [[File.expand_path('tmp/projects'), 2]]

The second important table is the index table. This table is generated
from the lookup table via the #sync method. Notice the index is presently
empty.

  env.index.assert == {}

But if we sync the environment,

  env.sync

then the index will contain entries for the library that exists in the
`tmp/projects` directory.

  env.index.keys.assert == ['tryme']

An Environment object provides a number of means of access to it's data.
In particular Environment is Enumerable, so we can iterate over the internal
index table using #each. Notice the structure of the index.

  env.each do |name, vers|
    name.assert == 'tryme'
    vers.each do |location, loadpath|
      location.assert.include?('tmp/projects/')
      loadpath.assert == ['lib']
    end
  end

Using #each is no different than iterating over the environments index.

   env.index.each do |name, vers|
     # ...
   end

This differs from the other internal table the environment tracks, which is
the *lookup* table.

   env.lookup.each do |path, depth|
      # ...
   end


